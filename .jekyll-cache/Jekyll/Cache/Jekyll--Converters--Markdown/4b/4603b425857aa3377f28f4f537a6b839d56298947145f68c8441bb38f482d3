I"ß
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Â  Â  public static boolean isInBackground(Context context) {

Â  Â  Â  Â  boolean isInBackground = true;

Â  Â  Â  Â  ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);

Â  Â  Â  Â  List taskInfo;

Â  Â  Â  Â  if (VERSION.SDK_INT &gt; 20) {

Â  Â  Â  Â  Â  Â  taskInfo = am.getRunningAppProcesses();

Â  Â  Â  Â  Â  Â  Iterator componentInfo = taskInfo.iterator();
 
 
Â  Â  Â  Â  Â  Â  while (true) {&lt;br&gt;
Â  Â  Â  Â  Â  Â  Â  Â  RunningAppProcessInfo processInfo;
Â  Â  Â  Â  Â  Â  Â  Â  do {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!componentInfo.hasNext()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return isInBackground;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
 
 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  processInfo = (RunningAppProcessInfo) componentInfo.next();
Â  Â  Â  Â  Â  Â  Â  Â  } while (processInfo.importance != 100);
 
 
Â  Â  Â  Â  Â  Â  Â  Â  String[] pkgs = processInfo.pkgList;
Â  Â  Â  Â  Â  Â  Â  Â  int length = pkgs.length;
 
 
Â  Â  Â  Â  Â  Â  Â  Â  for (int i = 0; i &lt; length; ++i) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  String activeProcess = pkgs[i];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (activeProcess.equals(context.getPackageName())) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  taskInfo = am.getRunningTasks(1);
Â  Â  Â  Â  Â  Â  ComponentName var10 = ((RunningTaskInfo) taskInfo.get(0)).topActivity;
Â  Â  Â  Â  Â  Â  if (var10.getPackageName().equals(context.getPackageName())) {
Â  Â  Â  Â  Â  Â  Â  Â  isInBackground = false;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
 
 
Â  Â  Â  Â  return isInBackground;
 
Â  Â  }

 
 
 
 
 
 
Â  Â  public static boolean isAppRunning(Context context, String name) {
Â  Â  Â  Â  if (TextUtils.isEmpty(name)) {
Â  Â  Â  Â  Â  Â  return false;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
Â  Â  Â  Â  Â  Â  List infos = am.getRunningAppProcesses();
Â  Â  Â  Â  Â  Â  if (infos == null) {
Â  Â  Â  Â  Â  Â  Â  Â  return false;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Iterator iterator = infos.iterator();
 
 
Â  Â  Â  Â  Â  Â  Â  Â  RunningAppProcessInfo info;
Â  Â  Â  Â  Â  Â  Â  Â  do {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!iterator.hasNext()) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
 
 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  info = (RunningAppProcessInfo) iterator.next();
Â  Â  Â  Â  Â  Â  Â  Â  } while (!info.processName.equals(name));
 
 
Â  Â  Â  Â  Â  Â  Â  Â  return true;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
</code></pre></div></div>

:ET