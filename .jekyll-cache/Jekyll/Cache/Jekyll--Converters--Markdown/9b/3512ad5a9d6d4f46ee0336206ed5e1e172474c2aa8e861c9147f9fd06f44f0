I"<h3 id="1ä¸‹è½½jenkins">1ã€ä¸‹è½½<a href="http://mirrors.jenkins.io/war-stable/latest/">Jenkins</a></h3>
<p>ç›´æ¥ä¸‹è½½.waræ–‡ä»¶ï¼Œé…ç½®ç¯å¢ƒå˜é‡<code class="language-plaintext highlighter-rouge">JENKINS_HOME</code>ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†åæœŸç”Ÿæˆçš„æ–‡ä»¶ï¼Œæ–‡ä»¶ä¼šåœ¨<code class="language-plaintext highlighter-rouge">JENKINS_HOME</code>ä¸‹ç”Ÿæˆ</p>

<p><code class="language-plaintext highlighter-rouge">JENKINS_HOME=C:\app\Jenkins</code></p>

<p>è¯·å¿½ç•¥jenkins.msi,è¿™æ˜¯Winå®‰è£…ç‰ˆ</p>

<h3 id="2é…ç½®tomcat">2ã€é…ç½®Tomcat</h3>
<p>åˆ©ç”¨Tomcatåˆ†ç›®å½•éƒ¨ç½²ï¼Œå¤åˆ¶jenkins.waråˆ°è‡ªå®šä¹‰çš„Tomcatæ ¹ç›®å½•\webappä¸‹</p>

<p><img src="/assets/jenkins-2.png" alt="" /></p>

<h3 id="3å¯åŠ¨tomcat">3ã€å¯åŠ¨Tomcat</h3>

<p><code class="language-plaintext highlighter-rouge">tomcat.bat</code>å¯åŠ¨Tomcatï¼Œå®Œæˆåæµè§ˆå™¨è¾“å…¥<code class="language-plaintext highlighter-rouge">http://localhost:8080/jenkins</code>å®‰è£…æ’ä»¶ï¼Œé€‰æ‹©é»˜è®¤<code class="language-plaintext highlighter-rouge">Install suggested plugins</code>ç­‰å¾…å®‰è£…æˆåŠŸã€‚å¦‚å¯åŠ¨å¤±è´¥ï¼Œå°è¯•å¯åŠ¨å¦ä¸€ä¸ªTomcatå®ä¾‹åå†æ¬¡å¯åŠ¨Jenkins Tomcatå®ä¾‹</p>

<p><img src="/assets/jenkins-1.png" alt="" /></p>

<h3 id="4é…ç½®jenkins">4ã€é…ç½®Jenkins</h3>
<p>æ’ä»¶å®‰è£…å®Œæˆä¼šæç¤ºè¾“å…¥å¯†é’¥ã€æ–°å»ºè´¦å·ç­‰è¾“å…¥å®Œæˆè¿›å…¥ä¸‹å›¾é¡µé¢</p>

<p><img src="/assets/jenkins-3.png" alt="" /></p>

<p>Manage Jenkinsâ€“&gt;Global Tool Configuration</p>

<ul>
  <li>é…ç½®JDK <code class="language-plaintext highlighter-rouge">åˆ«å</code> <code class="language-plaintext highlighter-rouge">JAVA_HOME</code> <code class="language-plaintext highlighter-rouge">JDKå®‰è£…ç›®å½•</code></li>
  <li>é…ç½®Git	<code class="language-plaintext highlighter-rouge">name</code> <code class="language-plaintext highlighter-rouge">Path to Git executable</code> é€‰æ‹© <code class="language-plaintext highlighter-rouge">Gitå®‰è£…ç›®å½•\cmd\git.exe</code></li>
  <li>é…ç½®Gradle <code class="language-plaintext highlighter-rouge">name</code> <code class="language-plaintext highlighter-rouge">GRADLE_HOME</code>  <code class="language-plaintext highlighter-rouge">xxuser\.gradle\wrapper\dis\gradle-5.1.1-all\xxx\gradle-5.1.1</code></li>
  <li>ä¿å­˜</li>
</ul>

<h3 id="5æ–°å»ºä»»åŠ¡">5ã€æ–°å»ºä»»åŠ¡</h3>

<p>å®ŒæˆJDK,Git,Gradleé…ç½®åæ¥ä¸‹æ¥æ–°å»ºä»»åŠ¡</p>

<ul>
  <li>è¾“å…¥ä¸€ä¸ªä»»åŠ¡åç§°</li>
  <li>é€‰æ‹©æ„å»ºä¸€ä¸ªå¤šé…ç½®é¡¹ç›®</li>
  <li><code class="language-plaintext highlighter-rouge">General</code> æ ‡ç­¾è¾“å…¥<code class="language-plaintext highlighter-rouge">æè¿°</code>,å‹¾é€‰<code class="language-plaintext highlighter-rouge">GitHubé¡¹ç›®</code>,å¡«å†™<code class="language-plaintext highlighter-rouge">é¡¹ç›® URL</code></li>
  <li><code class="language-plaintext highlighter-rouge">æºç ç®¡ç†</code> æ ‡ç­¾å‹¾é€‰<code class="language-plaintext highlighter-rouge">Git</code>,Repositories URL å¡«å†™<code class="language-plaintext highlighter-rouge">é¡¹ç›® URL</code>,Credentials æ·»åŠ å‡­æ®ï¼Œè¾“å…¥GitHub<code class="language-plaintext highlighter-rouge">ç”¨æˆ·å</code> <code class="language-plaintext highlighter-rouge">å¯†ç </code></li>
  <li><code class="language-plaintext highlighter-rouge">æ„å»º</code> æ ‡ç­¾é€‰æ‹©<code class="language-plaintext highlighter-rouge">Invoke Gradle script</code>,Task è¾“å…¥ <code class="language-plaintext highlighter-rouge">clean assembleRelease</code></li>
  <li>ä¿å­˜</li>
</ul>

<p>å®Œæˆåè‡ªåŠ¨è¿”å›åˆ°ä»»åŠ¡åˆ—è¡¨</p>

<h3 id="6androidé¡¹ç›®buildgradle">6ã€Androidé¡¹ç›®<code class="language-plaintext highlighter-rouge">build.gradle</code></h3>
<ul>
  <li>æ–°å»ºç­¾åæ–‡ä»¶</li>
  <li>build.gradle å¢åŠ  buildType <code class="language-plaintext highlighter-rouge">release</code> å¢åŠ <code class="language-plaintext highlighter-rouge">signingConfigs release</code></li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>signingConfigs{
	release{
		storeFile file("../xxx.jks")
		storePassword "xxx";
		keyAlias "key0"
		keyPassword "xxx"
	
	}
}

buildTypes{
	release{
		signingconfig signingConfigs.release
	}
}

</code></pre></div></div>

<h3 id="7å¼€å§‹æ„å»º">7ã€å¼€å§‹æ„å»º</h3>
<p>ç¬¬5æ­¥çš„ä»»åŠ¡åˆ—è¡¨å³ä¾§æŒ‰é’®å¼€å§‹æ„å»º,æ„å»ºå®Œæˆåé€‰æ‹©å½“å‰ä»»åŠ¡çš„å·¥ä½œç©ºé—´ï¼Œapkæ–‡ä»¶åœ¨app\buildæ–‡ä»¶å¤¹ä¸‹</p>

<h3 id="8å‚æ•°åŒ–æ„å»º">8ã€å‚æ•°åŒ–æ„å»º</h3>

<ul>
  <li>ä»»åŠ¡åˆ—è¡¨ï¼Œé€‰æ‹©å½“å‰ä»»åŠ¡ï¼Œé€‰æ‹©é…ç½®ï¼ŒGeneralæ ‡ç­¾ä¸‹ å‹¾é€‰ <code class="language-plaintext highlighter-rouge">This project is parameterized</code></li>
  <li>é€‰æ‹©<code class="language-plaintext highlighter-rouge">Choice Parameter</code> å¢åŠ  VERSION_CODE 
<img src="/assets/jenkins-4.jpg" alt="" /></li>
  <li>gradle.properties å¢åŠ  VERSION_CODE=1.1å‚æ•°</li>
  <li>build.gradle å¢åŠ å¦‚ä¸‹ä»£ç å®ç°å‚æ•°æ³¨å…¥
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> android.applicationVariants.all { variant -&gt;
    variant.outputs.all {
        outputFileName = "${variant.name}-${VERSION_CODE}.apk"
    }
}
</code></pre></div>    </div>
  </li>
  <li>å¼€å§‹æ„å»ºï¼Œç‚¹å‡»ä»»åŠ¡åˆ—è¡¨å³ä¾§æ„å»ºæŒ‰é’®ï¼Œä¼šå‡ºç°<code class="language-plaintext highlighter-rouge">éœ€è¦å¦‚ä¸‹å‚æ•°ç”¨äºæ„å»ºé¡¹ç›®</code> é€‰æ‹©ä½ è¦é…ç½®çš„ç‰ˆæœ¬å·ï¼Œå¼€å§‹æ„å»ºã€‚</li>
</ul>

:ET